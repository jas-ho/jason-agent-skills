{"id":"jas-4pz","title":"Expand skitour skill to cover major Austrian touring regions","description":"## Architecture Change Required\n**Dual-API support** - different endpoints for different regions:\n\n| Region | API Endpoint |\n|--------|--------------|\n| AT-02 (Carinthia) | `static.avalanche.report/bulletins/{date}/AT-02.json` |\n| AT-03 (Lower Austria) | `static.lawinen-warnung.eu/bulletins/latest/AT-03.json` |\n| AT-06 (Styria) | `static.lawinen-warnung.eu/bulletins/latest/AT-06.json` |\n| AT-07 (Tyrol) | `static.avalanche.report/bulletins/{date}/AT-07.json` |\n| AT-08 (Vorarlberg) | `static.lawinen-warnung.eu/bulletins/latest/AT-08.json` |\n\n## Code Changes\n\n### 1. Update get_avalanche_data() to handle both APIs\n```bash\nget_avalanche_data() {\n    local region_code=\"$1\"\n    local micro_region=\"$2\"\n    local url\n    \n    case \"$region_code\" in\n        AT-02|AT-07)\n            local today=$(date +%Y-%m-%d)\n            url=\"https://static.avalanche.report/bulletins/${today}/${region_code}.json\"\n            ;;\n        *)\n            url=\"https://static.lawinen-warnung.eu/bulletins/latest/${region_code}.json\"\n            ;;\n    esac\n    # ... rest unchanged\n}\n```\n\n### 2. New Locations to Add\n\n**Tyrol (AT-07)** - ~12 locations:\n| Name | Coords | Micro-region |\n|------|--------|--------------|\n| stubai | 47.08,11.31 | AT-07-22 (Stubaier Alpen Mitte) |\n| oetztal | 46.90,10.86 | AT-07-20 (WeiÃŸkugelgruppe) |\n| soelden | 46.97,10.88 | AT-07-21 (Gurgler Gruppe) |\n| zillertal | 47.05,11.88 | AT-07-23-01 (Zillertaler NW) |\n| hintertux | 47.10,11.67 | AT-07-15 (Tuxer Alpen West) |\n| kuehtai | 47.21,11.02 | AT-07-14-02 (KÃ¼htai-Geigenkamm) |\n| sellrain | 47.18,11.13 | AT-07-14-03 (Sellrain-Alpeiner) |\n| arlberg | 47.13,10.21 | AT-07-10 (Verwallgruppe Mitte) |\n| silvretta | 46.92,10.10 | AT-07-12 (Silvretta Ost) |\n| kaunertal | 46.98,10.71 | AT-07-14-01 (Kaunergrat) |\n| karwendel | 47.40,11.45 | AT-07-04-01 (Karwendel West) |\n| kitzbuhel | 47.45,12.39 | AT-07-17-01 (KitzbÃ¼heler Brixental) |\n\n**Salzburg (AT-05)** - ~6 locations (pending API verification)\n\n**Carinthia (AT-02)** - ~4 locations:\n| Name | Coords | Micro-region |\n|------|--------|--------------|\n| grossglockner | 47.08,12.76 | AT-02-01-01 (Glocknergruppe) |\n| nockberge | 46.90,13.78 | AT-02-04-01 (Nockberge Mitte) |\n| karawanken | 46.47,14.25 | AT-02-18 (Karawanken Mitte) |\n| ankogel | 47.05,13.25 | AT-02-03-01-01 (Ankogel-Hochalm) |\n\n**Vorarlberg (AT-08)** - ~4 locations:\n| Name | Coords | Micro-region |\n|------|--------|--------------|\n| lech | 47.21,10.14 | AT-08-05-01 |\n| montafon | 47.00,9.98 | AT-08-04 |\n| kleinwalsertal | 47.35,10.18 | AT-08-03-01 |\n| bregenzerwald | 47.38,9.90 | AT-08-01 |\n\n### 3. Update REGION_NAMES array\nAdd all new micro-region display names (extracted from CAAML XML).\n\n## Acceptance Criteria\n- [ ] Dual-API support working (avalanche.report + lawinen-warnung.eu)\n- [ ] 12+ Tyrol locations with correct micro-regions\n- [ ] 4+ Carinthia locations\n- [ ] 4+ Vorarlberg locations\n- [ ] All new regions in REGION_NAMES\n- [ ] Test each with --compare flag\n- [ ] SKILL.md updated with location list","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-10T20:55:01.019521+01:00","created_by":"jason","updated_at":"2026-01-10T21:29:28.734105+01:00"}
{"id":"jas-6z2","title":"Remove unused SCRIPT_DIR variable","status":"closed","priority":3,"issue_type":"chore","created_at":"2026-01-10T16:28:10.474592+01:00","created_by":"jason","updated_at":"2026-01-10T21:28:32.566755+01:00","closed_at":"2026-01-10T16:46:55.567869+01:00","close_reason":"Already removed during P1 fixes"}
{"id":"jas-885","title":"Add example output to skitour SKILL.md","description":"## Task\nCapture actual script output and add to SKILL.md as example.\n\n## Steps\n1. Run: `./skitour.sh --location rax`\n2. Capture output (sanitize any timing variations)\n3. Add to SKILL.md under `## Example Output` section\n\n## Format\n```\n## Example Output\n\n\\`\\`\\`\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n  ğŸ“ RAX (Rax - Schneeberggebiet)\n     Coordinates: 47.706Â°N, 15.733Â°E\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nğŸ”º AVALANCHE DANGER\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n   Above treeline: 2 - Moderate\n   Below treeline: 1 - Low\n   ...\n\\`\\`\\`\n```\n\n## Acceptance Criteria\n- [ ] Example output added to SKILL.md\n- [ ] Shows all three data sections (avalanche, snow, weather)","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-10T16:28:11.060575+01:00","created_by":"jason","updated_at":"2026-01-10T21:30:09.738913+01:00"}
{"id":"jas-8ln","title":"Add curl timeout to prevent hangs","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-10T16:27:58.02433+01:00","created_by":"jason","updated_at":"2026-01-10T21:28:32.564734+01:00","closed_at":"2026-01-10T16:44:44.340776+01:00","close_reason":"Fixed in skitour.sh: dependency checks, curl timeout, exit code"}
{"id":"jas-a5f","title":"Fix exit code for unknown options","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-10T16:27:59.49102+01:00","created_by":"jason","updated_at":"2026-01-10T21:28:32.563881+01:00","closed_at":"2026-01-10T16:44:44.34185+01:00","close_reason":"Fixed in skitour.sh: dependency checks, curl timeout, exit code"}
{"id":"jas-e80","title":"Add more touring locations to skitour","status":"closed","priority":4,"issue_type":"feature","created_at":"2026-01-10T16:28:11.631625+01:00","created_by":"jason","updated_at":"2026-01-10T21:28:32.567169+01:00","closed_at":"2026-01-10T20:54:45.993866+01:00","close_reason":"Superseded by more detailed issue with concrete implementation plan"}
{"id":"jas-eci","title":"Adopt pre-commit hooks from apart-kit","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T16:28:11.907891+01:00","created_by":"jason","updated_at":"2026-01-10T21:28:32.565171+01:00","closed_at":"2026-01-10T16:46:23.080002+01:00","close_reason":"Added .pre-commit-config.yaml with gitleaks, shellcheck, file hygiene hooks"}
{"id":"jas-ivg","title":"Optimize jq calls in weather display loop","description":"## Problem\nThe weather display loop (lines 212-225) calls jq 5 times per iteration for 12 iterations = **60 jq process spawns**.\n\n## Current Code (lines 212-225)\n```bash\nfor i in {0..11}; do\n    hour=$(echo \"$weather_json\" | jq -r \".hourly.time[$i]...\")\n    temp=$(echo \"$weather_json\" | jq -r \".hourly.temperature_2m[$i]...\")\n    wind=$(echo \"$weather_json\" | jq -r \".hourly.windspeed_10m[$i]...\")\n    cloud=$(echo \"$weather_json\" | jq -r \".hourly.cloudcover[$i]...\")\n    precip=$(echo \"$weather_json\" | jq -r \".hourly.precipitation_probability[$i]...\")\n    printf ...\ndone\n```\n\n## Solution\nSingle jq call that outputs pre-formatted lines:\n```bash\necho \"$weather_json\" | jq -r '\n    [range(12)] | .[] as $i |\n    \"\\(.hourly.time[$i] | split(\"T\")[1] | split(\":\")[0]) \\(.hourly.temperature_2m[$i]) \\(.hourly.windspeed_10m[$i]) \\(.hourly.cloudcover[$i]) \\(.hourly.precipitation_probability[$i])\"\n' | while read hour temp wind cloud precip; do\n    printf \"   %02d:00 %5.1fÂ°C %5.0fkm/h %4.0f%%   %3.0f%%\\n\" \"$hour\" \"$temp\" \"$wind\" \"$cloud\" \"$precip\"\ndone\n```\n\n## Acceptance Criteria\n- [ ] Replace 60 jq calls with 1\n- [ ] Output unchanged\n- [ ] Handle empty/error weather data gracefully","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-10T16:28:00.830761+01:00","created_by":"jason","updated_at":"2026-01-10T21:28:32.565663+01:00"}
{"id":"jas-kjq","title":"Add argument validation for CLI options","description":"## Current State\nNo validation - unknown options silently fail, invalid coords accepted.\n\n## Validations to Add\n\n### 1. Unknown option handling (line 243)\n```bash\n*) echo \"Unknown option: $1\" \u003e\u00262; usage; exit 1 ;;\n```\n**Fix**: Show available options before exiting.\n\n### 2. Latitude/longitude range validation\n```bash\n# After parsing --lat/--lon\nif [[ -n \"$lat\" ]]; then\n    if ! [[ \"$lat\" =~ ^-?[0-9]+\\.?[0-9]*$ ]] || \\\n       (( $(echo \"$lat \u003c 45 || $lat \u003e 49\" | bc -l) )); then\n        echo \"Error: Latitude must be between 45-49 (Austria)\" \u003e\u00262\n        exit 1\n    fi\nfi\n# Similar for lon (9-18 for Austria)\n```\n\n### 3. Empty location name\n```bash\nif [[ -z \"$location\" \u0026\u0026 -z \"$lat\" \u0026\u0026 -z \"$lon\" \u0026\u0026 -z \"$compare\" ]]; then\n    usage\nfi\n```\n\n### 4. Partial coordinate (lat without lon)\n```bash\nif [[ -n \"$lat\" \u0026\u0026 -z \"$lon\" ]] || [[ -z \"$lat\" \u0026\u0026 -n \"$lon\" ]]; then\n    echo \"Error: Both --lat and --lon required for coordinate lookup\" \u003e\u00262\n    exit 1\nfi\n```\n\n## Acceptance Criteria\n- [ ] Unknown options show help and exit 1\n- [ ] Invalid lat/lon shows error with valid range\n- [ ] Missing paired lat/lon shows clear error\n- [ ] Empty compare list handled gracefully","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-10T16:28:10.212977+01:00","created_by":"jason","updated_at":"2026-01-10T21:28:32.565391+01:00"}
{"id":"jas-l6b","title":"Consider migrating custom slash commands to this repo","description":"## Status: DEFERRED\n\nUser decision: Keep commands in ~/.claude/commands/ separate from this skills repo for now. Revisit later.\n\n## Original Context\nEvaluate moving personal Claude Code slash commands from ~/.claude/commands/ to this marketplace repo.\n\n**Current location**: ~/.claude/commands/*.md\n**Examples**: sync-dotfiles, sync-claude-config, etc.\n\n**Questions to resolve** (when revisited):\n- Should these be plugins (with SKILL.md) or stay as simple .md commands?\n- Which commands are general-purpose vs personal?\n- How to handle commands that reference user-specific paths?","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-10T17:16:12.687001+01:00","created_by":"jason","updated_at":"2026-01-10T21:34:03.340023+01:00"}
{"id":"jas-m5q","title":"Document bash 4+ requirement in SKILL.md","description":"## Change\nAdd bash 4+ prerequisite to SKILL.md since the script uses associative arrays.\n\n## Location\n`plugins/skitour/SKILL.md` - add to Quick Usage or create Prerequisites section:\n\n```markdown\n## Prerequisites\n- bash 4.0+ (associative arrays)\n- jq, curl, bc (checked at runtime)\n```\n\n## Acceptance Criteria\n- [ ] SKILL.md documents bash 4+ requirement\n- [ ] Mention macOS users may need `brew install bash`","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-10T16:28:10.745093+01:00","created_by":"jason","updated_at":"2026-01-10T21:30:09.653778+01:00"}
{"id":"jas-n7u","title":"Add dependency checks for jq, curl, bc","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-10T16:27:56.636494+01:00","created_by":"jason","updated_at":"2026-01-10T21:28:32.564954+01:00","closed_at":"2026-01-10T16:44:44.338854+01:00","close_reason":"Fixed in skitour.sh: dependency checks, curl timeout, exit code"}
{"id":"jas-o7z","title":"Implement coordinate to region lookup using EAWS polygons","description":"## Goal\nEnable `--lat LAT --lon LON` to automatically determine the correct EAWS micro-region.\n\n## Data Source\nEAWS provides GeoJSON polygons at:\n`https://regions.avalanches.org/micro-regions/AT-XX_micro-regions.geojson.json`\n\n## Implementation Approach\n\n### Option A: Runtime fetch + jq point-in-polygon (CHOSEN)\n- Fetch micro-regions GeoJSON on demand\n- Use jq for simple bounding box check first (fast filter)\n- Full point-in-polygon for candidates\n\n### Option B: Embedded lookup table (REJECTED)\n- Pre-compute bounding boxes for each micro-region\n- ~300 entries, complex maintenance\n\n## Algorithm\n1. Determine parent region from lat/lon (AT-02 through AT-08)\n2. Fetch `https://regions.avalanches.org/micro-regions/AT-XX_micro-regions.geojson.json`\n3. For each feature, check if point is inside polygon\n4. Return matching micro-region ID\n\n## Point-in-polygon in bash/jq\nUse ray casting algorithm in jq:\n```jq\ndef point_in_polygon($point):\n  .coordinates[0] as $ring |\n  ($point[0]) as $x | ($point[1]) as $y |\n  reduce range(length($ring)) as $i (false;\n    (($ring[$i][1] \u003e $y) != ($ring[($i+1) % length($ring)][1] \u003e $y)) and\n    ($x \u003c ($ring[($i+1) % length($ring)][0] - $ring[$i][0]) * ($y - $ring[$i][1]) / ($ring[($i+1) % length($ring)][1] - $ring[$i][1]) + $ring[$i][0])\n    | if . then not else . end\n  );\n```\n\n## Parent Region Lookup (rough bounds)\n| Region | Lat Range | Lon Range |\n|--------|-----------|-----------|\n| AT-02 | 46.4-47.2 | 12.7-15.1 |\n| AT-03 | 47.5-48.1 | 14.5-16.1 |\n| AT-06 | 47.0-47.8 | 13.5-16.2 |\n| AT-07 | 46.7-47.6 | 10.1-12.9 |\n| AT-08 | 46.8-47.5 | 9.5-10.3 |\n\n## API Routing (discovered in research)\n- AT-02, AT-07: `static.avalanche.report/bulletins/{date}/`\n- AT-03, AT-06, AT-08: `static.lawinen-warnung.eu/bulletins/latest/`\n\n## Acceptance Criteria\n- [ ] `--lat 47.1 --lon 11.1` returns Stubai region data\n- [ ] `--lat 47.7 --lon 15.8` returns Schneeberg region data\n- [ ] Out-of-Austria coords show clear error\n- [ ] Handles multi-polygon regions correctly","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-10T16:28:11.347555+01:00","created_by":"jason","updated_at":"2026-01-10T21:28:32.566142+01:00"}
